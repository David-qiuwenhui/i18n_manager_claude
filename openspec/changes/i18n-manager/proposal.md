# Proposal: I18N词条管理工具

## Why

当前项目有20+开发者参与前端开发，所有国际化（I18N）词条需要开发手动导入到统一的公服系统。现有流程缺乏 词条 Key 定义规范化和修改记录可追溯性， 所以导致词条管理混乱、修改历史难以追踪、多人协作时容易产生冲突。现在需要建立一套工程化、规范化的词条管理体系，利用代码仓库和Git版本控制实现对整个国际化修改流程的可追溯性。

## What Changes

- **新增多模块词条文件组织**: 按业务功能模块（如 `user`, `order`, `payment`）拆分词条文件，每个模块维护独立的 JSON 文件，便于团队协作维护
- **新增全局词条校验**: 跨模块收集所有词条信息，执行键名唯一性校验（避免跨模块重复定义）、翻译完整性校验（中英文必须同时存在）、格式规范校验
- **新增公服词条差异对比**: 支持将公服系统导出的词条文件与代码仓库词条进行对比，识别新增、修改、删除的词条，便于同步管理
- **新增词条导出功能**: 将代码仓库中的词条自动生成 Excel 文件，通过 npm script 一键导出，供手动导入到公服系统
- **集成Git工作流**: 利用 Git 提交历史实现词条修改的完整追溯，通过 PR 方式进行代码审查

## Capabilities

### New Capabilities

- `i18n-entry-storage`: I18N词条的代码化存储能力，支持按业务功能模块（如 `user`, `order`, `payment`）组织 JSON 格式的词条文件，每个文件包含中英文键值对
- `i18n-validation`: I18N词条全局校验能力，跨模块收集所有词条信息，执行键名唯一性校验、翻译完整性校验、格式规范校验
- `i18n-export`: I18N词条导出能力，将代码仓库中的词条合并并转换为公服系统可导入的 Excel 文件格式
- `i18n-diff`: I18N词条差异对比能力，对比代码仓库词条与公服导出词条之间的差异，识别新增、修改、删除的词条

### Modified Capabilities

_(无现有能力需要修改，这是一个全新的工具)_

## Impact

### 受影响的系统

- **前端项目开发流程**: 开发者通过代码方式管理词条，不再直接操作公服系统
- **词条文件结构**: 项目中新增 `i18n/` 目录，按业务模块组织多个 JSON 文件（如 `user.json`, `order.json`）

### 技术依赖

- **Git**: 版本控制核心
- **Node.js/TypeScript**: CLI工具开发语言
- **JSON**: 词条存储格式
- **Excel**: 公服系统导入格式（使用 `exceljs` 或类似库生成）

### 团队影响

- **开发者**: 按业务模块维护对应的词条文件，通过 PR 方式贡献词条修改
- **代码审查者**: 需要审查词条相关的代码变更，CLI 提供校验命令辅助审查

### CLI 核心命令

```bash
i18n-cli validate          # 全局校验所有模块词条
i18n-cli export            # 导出为 Excel 文件供公服导入
i18n-cli diff <公服文件>   # 对比代码仓库与公服词条差异
```
