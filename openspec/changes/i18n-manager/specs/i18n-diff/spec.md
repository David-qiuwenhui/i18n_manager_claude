# Spec: I18Nè¯æ¡å·®å¼‚å¯¹æ¯”

## ADDED Requirements

### Requirement: è§£æå…¬æœå¯¼å‡ºæ–‡ä»¶
ç³»ç»Ÿ SHALL æ”¯æŒè§£æä»å…¬æœç³»ç»Ÿå¯¼å‡ºçš„è¯æ¡æ–‡ä»¶ï¼ˆExcel æˆ– JSON æ ¼å¼ï¼‰ã€‚

#### Scenario: è§£æExcelæ ¼å¼å…¬æœæ–‡ä»¶
- **WHEN** æ‰§è¡Œå·®å¼‚å¯¹æ¯”å‘½ä»¤å¹¶æä¾›å…¬æœå¯¼å‡ºçš„ Excel æ–‡ä»¶
- **THEN** ç³»ç»Ÿåº”è§£æ Excel æ–‡ä»¶ä¸­çš„è¯æ¡æ•°æ®
- **AND** æå–é”®åã€ä¸­æ–‡ã€è‹±æ–‡ä¸‰åˆ—æ•°æ®

#### Scenario: è§£æJSONæ ¼å¼å…¬æœæ–‡ä»¶
- **WHEN** æ‰§è¡Œå·®å¼‚å¯¹æ¯”å‘½ä»¤å¹¶æä¾›å…¬æœå¯¼å‡ºçš„ JSON æ–‡ä»¶
- **THEN** ç³»ç»Ÿåº”è§£æ JSON æ–‡ä»¶ä¸­çš„è¯æ¡æ•°æ®
- **AND** æ­£ç¡®å¤„ç†å…¬æœç³»ç»Ÿçš„æ•°æ®ç»“æ„

#### Scenario: å…¬æœæ–‡ä»¶æ ¼å¼è¯†åˆ«
- **WHEN** æä¾›å…¬æœæ–‡ä»¶
- **THEN** ç³»ç»Ÿåº”æ ¹æ®æ–‡ä»¶æ‰©å±•åè‡ªåŠ¨è¯†åˆ«æ ¼å¼ï¼ˆ.xlsx æˆ– .jsonï¼‰
- **AND** ä½¿ç”¨å¯¹åº”çš„è§£æå™¨å¤„ç†æ•°æ®

### Requirement: æ£€æµ‹æ–°å¢è¯æ¡
ç³»ç»Ÿ SHALL è¯†åˆ«ä»£ç ä»“åº“ä¸­å­˜åœ¨ä½†å…¬æœç³»ç»Ÿä¸­ä¸å­˜åœ¨çš„è¯æ¡ã€‚

#### Scenario: å‘ç°æ–°è¯æ¡
- **WHEN** æ‰§è¡Œå·®å¼‚å¯¹æ¯”
- **AND** æŸæ¡è¯æ¡å­˜åœ¨äºä»£ç ä»“åº“ä½†ä¸åœ¨å…¬æœæ–‡ä»¶ä¸­
- **THEN** ç³»ç»Ÿåº”å°†å…¶æ ‡è®°ä¸ºã€Œæ–°å¢ã€
- **AND** æ˜¾ç¤ºè¯æ¡çš„é”®åå’Œç¿»è¯‘å†…å®¹

#### Scenario: æ–°è¯æ¡è¾“å‡ºæ ¼å¼
```bash
$ i18n-cli diff public-export.xlsx
ğŸ“ New entries (12):
  + ebanking.profile.avatar        | zh: ç”¨æˆ·å¤´åƒ | en: Avatar
  + ebanking.settings.theme        | zh: ä¸»é¢˜è®¾ç½® | en: Theme Settings
  + channel.create.title           | zh: åˆ›å»ºæ¸ é“ | en: Create Channel
```

### Requirement: æ£€æµ‹ä¿®æ”¹è¯æ¡
ç³»ç»Ÿ SHALL è¯†åˆ«ä»£ç ä»“åº“å’Œå…¬æœç³»ç»Ÿä¸­éƒ½å­˜åœ¨ä½†ç¿»è¯‘å†…å®¹ä¸åŒçš„è¯æ¡ã€‚

#### Scenario: å‘ç°ç¿»è¯‘ä¿®æ”¹
- **WHEN** æ‰§è¡Œå·®å¼‚å¯¹æ¯”
- **AND** æŸæ¡è¯æ¡åœ¨ä¸¤å¤„éƒ½å­˜åœ¨ä½†ç¿»è¯‘å†…å®¹ä¸åŒ
- **THEN** ç³»ç»Ÿåº”å°†å…¶æ ‡è®°ä¸ºã€Œä¿®æ”¹ã€
- **AND** æ˜¾ç¤ºæ—§å€¼å’Œæ–°å€¼çš„å¯¹æ¯”

#### Scenario: ä¿®æ”¹è¯æ¡è¾“å‡ºæ ¼å¼
```bash
$ i18n-cli diff public-export.xlsx
âœï¸  Modified entries (3):
  ~ ebanking.login.title
      zh: "ç”¨æˆ·ç™»å½•" â†’ "ç”¨æˆ·ç™»å½•2"
      en: "User Login" â†’ "User Login v2"
```

### Requirement: æ£€æµ‹åˆ é™¤è¯æ¡
ç³»ç»Ÿ SHALL è¯†åˆ«å…¬æœç³»ç»Ÿä¸­å­˜åœ¨ä½†ä»£ç ä»“åº“ä¸­ä¸å­˜åœ¨çš„è¯æ¡ã€‚

#### Scenario: å‘ç°å·²åˆ é™¤è¯æ¡
- **WHEN** æ‰§è¡Œå·®å¼‚å¯¹æ¯”
- **AND** æŸæ¡è¯æ¡å­˜åœ¨äºå…¬æœæ–‡ä»¶ä½†ä¸åœ¨ä»£ç ä»“åº“ä¸­
- **THEN** ç³»ç»Ÿåº”å°†å…¶æ ‡è®°ä¸ºã€Œåˆ é™¤ã€
- **AND** æ˜¾ç¤ºè¯æ¡çš„é”®åå’Œç¿»è¯‘å†…å®¹

#### Scenario: åˆ é™¤è¯æ¡è¾“å‡ºæ ¼å¼
```bash
$ i18n-cli diff public-export.xlsx
ğŸ—‘ï¸  Deleted entries (2):
  - old.feature.title        | zh: æ—§åŠŸèƒ½ | en: Old Feature
  - deprecated.action.button | zh: å·²åºŸå¼ƒ | en: Deprecated
```

### Requirement: å·®å¼‚å¯¹æ¯”å‘½ä»¤
ç³»ç»Ÿ SHALL æä¾› `i18n-cli diff` å‘½ä»¤ç”¨äºæ‰§è¡Œå·®å¼‚å¯¹æ¯”ã€‚

#### Scenario: åŸºæœ¬å¯¹æ¯”å‘½ä»¤
```bash
$ i18n-cli diff public-export.xlsx
ğŸ“Š Diff Summary:
  ğŸ“ New: 12 entries
  âœï¸  Modified: 3 entries
  ğŸ—‘ï¸  Deleted: 2 entries
  âœ… Unchanged: 133 entries
```

#### Scenario: åªæ˜¾ç¤ºæœ‰å·®å¼‚çš„è¯æ¡
```bash
$ i18n-cli diff public-export.xlsx --changes-only
ğŸ“Š Changes only:
  ğŸ“ New: 12 entries
  âœï¸  Modified: 3 entries
  ğŸ—‘ï¸  Deleted: 2 entries
```

### Requirement: å·®å¼‚è¯¦æƒ…è¾“å‡º
ç³»ç»Ÿ SHALL æä¾›è¯¦ç»†çš„å·®å¼‚ä¿¡æ¯ï¼Œä¾¿äºå¼€å‘è€…äº†è§£å…·ä½“å˜åŒ–ã€‚

#### Scenario: å®Œæ•´å·®å¼‚æŠ¥å‘Š
```bash
$ i18n-cli diff public-export.xlsx --verbose
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š Diff Report: Code vs Public (2025-02-15 14:30:22)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ NEW ENTRIES (12)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  + ebanking.profile.avatar        | zh: ç”¨æˆ·å¤´åƒ | en: Avatar
  + ebanking.settings.theme        | zh: ä¸»é¢˜è®¾ç½® | en: Theme Settings
  ...

âœï¸  MODIFIED ENTRIES (3)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ~ ebanking.login.title
      zh: "ç”¨æˆ·ç™»å½•" â†’ "ç”¨æˆ·ç™»å½•2"
      en: "User Login" â†’ "User Login v2"
  ...

ğŸ—‘ï¸  DELETED ENTRIES (2)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - old.feature.title        | zh: æ—§åŠŸèƒ½ | en: Old Feature
  ...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Summary: 17 changes detected
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Requirement: å·®å¼‚å¯¼å‡º
ç³»ç»Ÿ SHALL æ”¯æŒå°†å·®å¼‚ç»“æœå¯¼å‡ºä¸ºæ–‡ä»¶ï¼Œä¾¿äºå­˜æ¡£æˆ–åˆ†äº«ã€‚

#### Scenario: å¯¼å‡ºå·®å¼‚ä¸ºJSON
```bash
$ i18n-cli diff public-export.xlsx --output diff-result.json
âœ… Diff result exported to diff-result.json
```

#### Scenario: å·®å¼‚JSONæ ¼å¼
```json
{
  "timestamp": "2025-02-15T14:30:22Z",
  "summary": {
    "new": 12,
    "modified": 3,
    "deleted": 2,
    "unchanged": 133
  },
  "newEntries": [
    {
      "key": "ebanking.profile.avatar",
      "zh": "ç”¨æˆ·å¤´åƒ",
      "en": "Avatar"
    }
  ],
  "modifiedEntries": [
    {
      "key": "ebanking.login.title",
      "old": { "zh": "ç”¨æˆ·ç™»å½•", "en": "User Login" },
      "new": { "zh": "ç”¨æˆ·ç™»å½•2", "en": "User Login v2" }
    }
  ],
  "deletedEntries": [
    {
      "key": "old.feature.title",
      "zh": "æ—§åŠŸèƒ½",
      "en": "Old Feature"
    }
  ]
}
```

### Requirement: å·®å¼‚é¢œè‰²åŒ–è¾“å‡º
ç³»ç»Ÿ SHALL åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨é¢œè‰²åŒºåˆ†ä¸åŒç±»å‹çš„å·®å¼‚ã€‚

#### Scenario: ç»ˆç«¯é¢œè‰²è¾“å‡º
- **WHEN** åœ¨æ”¯æŒé¢œè‰²çš„ç»ˆç«¯ä¸­æ‰§è¡Œå·®å¼‚å¯¹æ¯”
- **THEN** æ–°å¢è¯æ¡åº”æ˜¾ç¤ºä¸ºç»¿è‰²
- **AND** ä¿®æ”¹è¯æ¡åº”æ˜¾ç¤ºä¸ºé»„è‰²
- **AND** åˆ é™¤è¯æ¡åº”æ˜¾ç¤ºä¸ºçº¢è‰²

### Requirement: é€€å‡ºç 
ç³»ç»Ÿ SHALL ä½¿ç”¨é€‚å½“çš„é€€å‡ºç è¡¨ç¤ºå¯¹æ¯”ç»“æœã€‚

#### Scenario: æœ‰å·®å¼‚æ—¶é€€å‡ºç 
- **WHEN** æ£€æµ‹åˆ°ä»»ä½•å·®å¼‚
- **THEN** ç³»ç»Ÿåº”è¿”å›é€€å‡ºç  1

#### Scenario: æ— å·®å¼‚æ—¶é€€å‡ºç 
- **WHEN** æœªæ£€æµ‹åˆ°ä»»ä½•å·®å¼‚
- **THEN** ç³»ç»Ÿåº”è¿”å›é€€å‡ºç  0
